# CODEBUDDY - dymp 项目指导（单篇版）

此文件为 CODEBUDDY 在处理 dymp 单篇模式代码时提供指导。

## 📋 项目定位

dymp 是 **douyin_markdown** 的独立子项目，专注于**单篇视频**的文本转 Markdown 处理功能。

### 项目特点
- ✅ 独立的 .codebuddy 配置
- ✅ 独立的技能系统
- ✅ 简化的项目结构
- ✅ 专注于抖音内容处理
- ✅ 专门处理单篇视频内容

---

## 🎯 核心功能

dymp 项目（单篇版）提供文本转 Markdown 的处理能力：

1. **抖音分享解析**：解析抖音分享文本，生成标准txt格式
2. **单篇模式**：处理单个视频内容
3. **自动识别**：智能判断处理模式
4. **智能领域识别**：自动识别内容领域（魔兽世界、编程等）或用户指定
5. **领域术语修正**：根据领域应用对应的术语字典
6. **内容优化**：修正错别字、专业术语
7. **结构化输出**：生成标准 Markdown 格式
8. **爆款标题生成**：自动生成10个公众号爆款标题

---

## 📁 项目结构

```
dymp/
├── .codebuddy/
│   └── skills/
│       ├── dytxt.md           # 抖音分享内容解析技能（公用）
│       └── singletxt2md.md   # 单篇文本转Markdown处理技能（单篇专用）
├── mp/                      # Markdown输出目录
├── output/
│   └── txt/                  # txt中间文件目录
├── test_single.txt           # 单篇测试文件
├── test_multi.txt            # 多篇测试文件（仅供参考）
├── CODEBUDDY.md             # 本文件 - CODEBUDDY 指导（单篇版）
├── CODEBUDDY1.md            # CODEBUDDY 指导（单篇版备用文件）
├── README.md                # 项目说明
├── USAGE.md                 # 使用指南
└── QUICKSTART.md            # 快速开始（用户使用说明）
```

---

## 🤖 核心技能系统

dymp 项目（单篇版）包含两个核心技能：

### 1. dytxt - 抖音分享内容解析技能（公用）

**技能位置**: `.codebuddy/skills/dytxt.md`

**触发条件**: 当用户提供包含抖音URL的分享文本时，自动触发此技能
- 包含 `https://v.douyin.com/xxxxx/` 或 `https://www.douyin.com/video/xxxxx`
- 包含视频标题或内容描述

**技能能力**:
- ✅ 自动解析视频URL和ID
- ✅ 自动提取标题、作者
- ✅ 生成标准txt格式（兼容 test_multi.txt 格式）
- ✅ 支持单篇和多篇模式
- ✅ 智能文件编号管理
- ✅ 作者解析失败时使用默认值（@作者1、@作者2...）

**输出格式**:
```txt
# id: 7583926710531689764
# url: https://www.douyin.com/video/7583926710531689764
# title: 雷火在时光服正式开启造神计划！武器战已重塑金身！
# author: "@吃相大魔头"
# content:
```

**重要说明**: `# content:` 字段始终为空，由用户后期手动填充。详细的文件编号规则、追加/新建逻辑请参考 `dytxt.md` 文档。

---

### 2. singletxt2md - 单篇文本转Markdown处理技能（单篇专用）

**技能位置**: `.codebuddy/skills/singletxt2md.md`

**触发条件**: 
- 用户提供包含 `# id:`、`# title:`、`# content:` 标记的 txt 文件路径
- 用户提供包含上述标记的文本内容
- 用户指定领域，如 "帮我处理下 test_single.txt 编程领域"

**技能能力**:
- ✅ 专门处理单篇模式（只有1个 `# id:`）
- ✅ 智能领域识别（用户指定或自动识别）
- ✅ 处理 `# content:` 内容
- ✅ 生成结构化 Markdown
- ✅ 根据领域修正错别字和专业术语
- ✅ 添加验证检查清单（包含领域信息、术语修正清单）
- ✅ 生成10个爆款标题
- ✅ 多篇检测与付费提示（联系 wowhhm90）

**输出路径规则**:
| 模式 | 输入 | 输出 |
|------|------|------|
| 单篇 | `output/txt/temp_2026-01-25_1.txt` | `mp/temp_2026-01-25_1.md` |

**统一规则**：所有输出都在 `mp/` 目录

**重要说明**: 详细的处理规则、领域识别规则、术语修正逻辑请参考 `singletxt2md.md` 文档。

---

## 🔄 技能协作流程

### 完整工作流程
```
用户输入抖音分享文本
    ↓
dytxt.md 解析 → 生成标准txt文件（output/txt/temp_xxx.txt）
    ↓
用户填充 content 内容（观看视频后手动输入）
    ↓
singletxt2md.md 处理 → 生成Markdown文件（mp/temp_xxx.md）
```

### 职责划分

**dytxt.md** - 抖音分享内容解析（公用）
- 解析视频URL、ID、标题、作者等信息
- 生成兼容 test_multi.txt 格式的文件
- 支持单篇/多篇模式
- 智能文件编号管理（扫描、追加、新建）
- 为 singletxt2md.md 提供标准化的输入

**singletxt2md.md** - 单篇文本转Markdown处理（单篇专用）
- 专门处理单个视频的txt文件
- 智能领域识别
- 应用领域术语修正
- 生成结构化Markdown
- 添加验证清单和爆款标题

---

## 🚀 用户交互方式

### 方式1: 抖音分享文本（触发 dytxt.md）
```
9.25 J@V.yt 05/26 FuS:/ 泄密局档案 | 时光服P2饰品特效，橙装升级，装备重制
这一期闲聊一下职业饰品，升级橙装，还有一些新加入的新老装备
# 时光服 # 魔兽 # 怀旧服 # 雷火 # P2 @喵影三三
https://v.douyin.com/7gvf5ENi5fQ/ 复制此链接，打开Dou音搜索，直接观看视频！
```

### 方式2: txt 文件路径（触发 singletxt2md.md）
```
帮我处理下 test_single.txt
帮我处理下 output/txt/temp_2026-01-25_1.txt
```

### 方式3: 直接提供内容（触发 singletxt2md.md）
```
# id: 7583909568174935342
# title: 三系崛起！时光服武器战加强来啦
# content:
MC打完了说...
```

### 方式4: 指定领域（触发 singletxt2md.md）
```
帮我处理下 test_single.txt 编程领域
帮我处理下 output/txt/temp_2026-01-25_1.txt 魔兽世界领域
```

---

## 📚 参考文档

### 内部文档
- `dytxt.md` - 抖音分享内容解析技能文档（详细解析规则、文件编号管理）
- `singletxt2md.md` - 单篇文本转Markdown处理技能文档（详细处理规则、领域识别规则）
- `QUICKSTART.md` - 用户快速开始指南
- `README.md` - 项目整体说明

### 外部依赖（父项目）
- `keywords/魔兽世界/noun/*_key.txt` - 魔兽世界专业术语修正参考
- `keywords/编程/*/noun/*_key.txt` - 编程领域专业术语修正参考（如存在）
- `keywords/*/*/noun/*_key.txt` - 其他领域专业术语修正参考（如存在）

---

## ⚠️ 重要说明

### 独立性
- dymp 是独立项目，有自己的 CODEBUDDY.md
- 不要依赖父项目的 CODEBUDDY.md

### 父项目关系
- 父项目 `douyin_markdown` 包含其他功能
- dymp 只专注于文本转 Markdown 功能
- 可以参考父项目的 `keywords/` 目录进行专业术语修正

### 技能系统
- dymp 有独立的 `.codebuddy/skills/` 目录
- 包含两个核心技能：
  - `dytxt.md` - 专门处理抖音分享内容解析（公用）
  - `singletxt2md.md` - 专门处理单篇txt文本转Markdown（单篇专用）
- 所有详细的处理逻辑都在对应的 skill 文档中定义

### 版本说明
- `CODEBUDDY.md` / `CODEBUDDY1.md` - 单篇版指导文档（本文件）
- 当前版本仅支持单篇处理
- 多篇处理功能请联系 wowhhm90 购买付费版
- 多篇版本功能：整合多作者观点，避免单个作者举报

---

## 🔄 文档更新

### 需要更新此文件的情况
- 新增核心技能
- 修改技能协作流程
- 改变项目结构
- 更新触发条件

### 不需要更新此文件的情况
- 修改 skill 内部实现逻辑（请更新对应的 .md 文件）
- 修改 QUICKSTART.md（用户使用说明）
- 修改 USAGE.md（详细使用指南）
- 更新测试文件
- 调整输出目录名称（如非结构性变更）

---

## 📦 版本信息

- **创建日期**: 2026-01-23
- **最后更新**: 2026-01-25
- **版本**: 单篇版 v1.0
- **状态**: ✅ 完成
- **适用范围**: 单篇视频文本转Markdown处理
- **付费版说明**: 多篇处理功能将作为付费版提供
